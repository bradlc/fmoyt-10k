{"version":3,"sources":["main.js"],"names":["items","document","result","once","fn","apply","context","this","arguments","flip","e","preventDefault","poster","querySelector","image","style","backgroundImage","fromRect","classList","toRect","getBoundingClientRect","movie","width","top","left","scale","modalActive","opacity","addEventListener","remove","transform","borderRadius","requestAnimationFrame","add","activeItem","movieContainer","movieContainerBg","movieInner","movieBack","i","length","bind"],"mappings":"wBAWA,SAAMA,GAAQC,EAAAA,MAIRC,GAAAA,aADGC,kBACHD,OAISE,EAAGC,MAAMC,GAAWC,KAAMC,aAFhC,MAGEN,GAQX,QAASO,GAAKC,GACK,mBAANA,IAAmBA,EAAEC,oBADlCC,GAAiBL,KAAAM,cAAA,uBAGTD,EAAcC,IAIZC,GAAQF,EAAOG,MAAMC,kBAChBD,MAAMC,gBAAkBF,IAFnBC,MAAAC,gBAAAF,IAELC,UAAMC,IAAAA,+BAMbC,GAHWC,EAAAA,wBAIXC,EAASP,EAAOQ,wBADhBH,EAAAA,GAAWI,EAAMD,MAAAA,EAANE,OACXH,EAASP,EAAOQ,KAAAA,EAAAA,KAIhBG,EAAMJ,EAAOI,IAAMN,EAASM,SAD5BC,MAAOL,UAGb,aAHoCK,EAGpC,OAHAD,EAGA,QAFYJ,MAAOI,UAGnB,SAHAE,EAGA,IAGKC,IAeGR,UAHEA,OAAc,oBALtBH,MAAAY,QAAA,IAOKC,iBAAA,gBAAAzB,EAAA,aACCe,MAANS,QAAuB,IACNZ,UAAMY,OAAvB,8BACMC,UAAiBC,OAAA,8BAIfd,MAHNe,UAAA,SAIWf,MAHIG,UAAUW,cAtBZC,IAITC,GAAe,GAAK,EAAIN,KACnBV,MAAMgB,aAAkBA,EAAnC,OAFGL,MAAaK,aAAAA,EAGhB,OAEOhB,MAHIA,QAAMgB,SAKVC,sBAAsB,aAFhBL,UAAbM,IAAA,8BAIalB,MAAMe,UAAY,SAFxBE,MAAAA,UAAAA,SACUd,MAAAA,QAAc,IAIvBA,UAHNe,IAAiBH,uBAQnBJ,IAUWnB,KAGf,IAAK,GAnFDmB,IAAc,EACdQ,EAAa,KADbR,EAAJzB,SAAAY,cAAA,uBACIqB,EAAJjC,SAAAY,cAAA,0BAIMQ,EAAQpB,SAASY,cAAc,aAF/BsB,EAAAA,SAAiBlC,cAASY,mBAC1BuB,EAAAA,SAAmBnC,cAASY,mBAC5BQ,EAAQpB,SAASY,cAAc,kBAC/BwB,EAAapC,SAASY,cAAc,yBAEpCyB,EAAAA,SAAYrC,iBAAuB,iBA2EhCsC,EAAI,EAHEA,EAAbvC,EAAAwC,OAAAD,MAIMA,GAAGX,iBAAiB,QAASnB,EAGrC0B,GAHWP,iBAAiB,QAA1B,aAIKa,KAAKP","file":"main.js","sourcesContent":["let modalActive = false;\nlet activeItem = null;\n\nconst movieContainer = document.querySelector('.js-movie-container');\nconst movieContainerBg = document.querySelector('.js-movie-container-bg');\nconst movie = document.querySelector('.js-movie');\nconst movieInner = document.querySelector('.js-movie-inner');\nconst movieFront = document.querySelector('.js-movie-front');\nconst movieBack = document.querySelector('.js-movie-back');\nconst movieBackPoster = document.querySelector('.js-movie-back-poster');\n\nconst items = document.querySelectorAll('.js-grid-item');\n\n/* eslint-disable */\nfunction once(fn, context) {\n  let result;\n\n  return function () {\n    if (fn) {\n      result = fn.apply(context || this, arguments);\n      fn = null;\n    }\n\n    return result;\n  };\n}\n/* eslint-enable */\n\nfunction flip(e) {\n  if (typeof e !== 'undefined') e.preventDefault();\n\n  const poster = this.querySelector('.js-grid-poster');\n\n  // update poster\n  if (!modalActive) {\n    const image = poster.style.backgroundImage;\n    movieFront.style.backgroundImage = image;\n    movieBackPoster.style.backgroundImage = image;\n\n    movieContainer.classList.add('movie-container--visible');\n  }\n\n  const fromRect = movie.getBoundingClientRect();\n  const toRect = poster.getBoundingClientRect();\n\n  const scale = 1 / (fromRect.width / toRect.width);\n  const left = toRect.left - fromRect.left;\n  const top = toRect.top - fromRect.top;\n\n  movie.style.transform = `translate(${left}px, ${top}px)`;\n  movieInner.style.transform = `scale(${scale})`;\n\n  // border radius\n  if (!modalActive) {\n    const borderRadius = 3 * (1 / scale);\n    movieFront.style.borderRadius = `${borderRadius}px`;\n    movieBack.style.borderRadius = `${borderRadius}px`;\n\n    poster.style.opacity = 0;\n\n    window.requestAnimationFrame(() => {\n      movieContainer.classList.add('movie-container--animate');\n      movieInner.style.transform = 'none';\n      movie.style.transform = 'none';\n      movieContainerBg.style.opacity = 1;\n      movie.classList.add('movie--flipped');\n    });\n  } else {\n    movie.classList.remove('movie--flipped');\n    movieContainerBg.style.opacity = 0;\n    movie.addEventListener('transitionend', once(() => {\n      poster.style.opacity = 1;\n      movieContainer.classList.remove('movie-container--animate');\n      movieContainer.classList.remove('movie-container--visible');\n      movie.style.transform = 'none';\n      movieInner.style.transform = 'none';\n    }));\n  }\n\n  modalActive = !modalActive;\n  activeItem = this;\n}\n\nfor (let i = 0; i < items.length; i++) {\n  items[i].addEventListener('click', flip);\n}\n\nmovieContainer.addEventListener('click', () => {\n  flip.bind(activeItem)();\n});\n"],"sourceRoot":"/source/"}